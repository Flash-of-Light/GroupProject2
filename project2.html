<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Project 2</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Staatliches" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script type="text/javascript" src="assets/javascript/site.js"></script>
    <script type='text/javascript' src='movies/config.js'></script>
    <script type='text/javascript' src="movies/movies.js"></script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col">
                <div class="jumbotron text-center text-black">

                    <img class="logo" src="logo.png" alt="Logo" style="width:333px;height:175px;">
                </div>


                <!-- Weather Bar-->


                <div class="panel panel-success text-center">

                    <div class="panel-body">
                        <a class="weatherwidget-io" href="https://forecast7.com/en/35d91n79d06/chapel-hill/?unit=us"
                            data-label_1="CHAPEL HILL" data-label_2="WEATHER" data-theme="original">CHAPEL HILL WEATHER</a>
                        <script>
                            !function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = 'https://weatherwidget.io/js/widget.min.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'weatherwidget-io-js');
                        </script>

                    </div>
                </div>


                <!--  Clock Widget  -->

                <div class="col-md-6">
                    <div class="widget">
                        <div class="panel panel-default text-center">

                            <div class="panel-body">

                                <div style="text-align:center;padding:1em 0;">
                                    <h3><a style="text-decoration:none;" href="https://www.zeitverschiebung.net/en/city/4460162"><span
                                                style="color:gray;">Current local time in</span><br />Chapel Hill,
                                            United States</a></h3> <iframe src="https://www.zeitverschiebung.net/clock-widget-iframe-v2?language=en&size=medium&timezone=America%2FNew_York"
                                        width="100%" height="115" frameborder="0" seamless></iframe>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
                <!--  Movies Widget  -->

                <div class="col-md-6 movie-div">
                    <div class="widget">
                        <div class="panel panel-default text-center">
                            <nav class="navbar navbar-default" role="navigation">
                                <div class="container-fluid">
                                    <div class="collapse navbar-collapse" id="navbar-collapse-1">
                                        <form class="navbar-form navbar-right" role="search">
                                            <div class="form-group">
                                                <h2>Movies Near Me</h2>

                                                <input type="text" class="form-control" id="add-zip" placeholder="Enter Zip Code">
                                                <input type="text" class="form-control" id="add-date" placeholder="Enter Date (MM-DD)">
                                            </div>
                                            <button type="submit" class="btn btn-default buttons" id="submit">Submit</button>
                                            <button type="clear" class="btn btn-default buttons" id="clear">Clear</button>
                                        </form>
                                    </div>

                            </nav>

                            <div class="container movie-container">
                                <!--MAIN CONTAINER-->
                                <div class="panel panel-default">
                                    <div class="panel-heading">

                                    </div>
                                    <table class="table table-hover">
                                        <!--THIS IS THE IMPORTANT TABLE PIECE-->
                                        <tr>
                                            <th scope="col">Movie Title</th>
                                            <th scope="col">Rating</th>
                                            <th scope="col">Showtime</th>
                                            <th scope="col">Theater</th>
                                        </tr>
                                        <tbody id="movie-data"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>

            </div>
        </div>

        <!--  8-Ball Widget  -->
        <div class="row">
            <div class="col-md-6">
                <div class="widget">
                    <div class="panel panel-default text-center">

                        <div class="panel-body">
                            <h2 style="font-family: 'Staatliches', cursive;">Magic Eightball</h2>
                            <img class="logo" src="8-ball/ball.jpeg" alt="Magic Eightball" style="width:100px;height:100px;">
                            <button type="button" class="btn btn-dark" id="eightball" style="font-family: 'Staatliches', cursive;">Ask
                                a question!</button>
                            <p id="answer" style="font-family: 'Staatliches', cursive;">Eightball says:</p>
                        </div>
                    </div>
                </div>

                <script type="text/javascript">
                    // $(document).ready(function(){
                    // $("#eightball").click(function(){
                    //   $("#answer").text(res.json(newfortune));
                    // });
                    $("#eightball").on("click", function () {
                        $.post("/eightball", function (data) {
                            $("#answer").text("Eightball says: " + data);
                            console.log(data);
                        })
                    });
                </script>
            </div>

            <div class="col-lg-6">
                <div class="widget">
                    <div class="panel panel-default text-center">

                        <div class="panel-body">

                            <div class="container">
                                <div class="row">
                                    <div class="col-lg" id="todo" style="background-color: black; margin-top: 20px;">
                                        <h2 style="color: white;"></h2>
                                        </h2>
                                        <h2 style="color:white; font-family: 'Staatliches', cursive; text-align: center;">To-Do
                                            List!</h2>

                                        <h4 style="color:white; font-family: 'Staatliches', cursive; text-align: center;">Add
                                            a
                                            to-do</h4>
                                        <form id="createplan" class="button-size" style="text-align: center;">
                                            <textarea rows="1" cols="30" type="text" name="plan" placeholder="Walk the dog..."></textarea>
                                            <br>
                                            <button type="submit" class="btn btn-ligt" style="font-family: 'Staatliches', cursive;">Save
                                                to-do!</button>
                                        </form>
                                        <br>
                                        <h4 style="color:white; font-family: 'Staatliches', cursive; text-align: center;">Update
                                            a to-do</h3>
                                            <form id="updateplan" class="button-size" style="text-align: center;">
                                                <select name="id">
                                                    {{#each plans}}
                                                    <option value="{{this.id}}">{{this.plan}}</option>
                                                    {{/each}}
                                                </select>
                                                <textarea rows="1" cols="30" type="text" name="plan" placeholder="Reschedule that..."></textarea>
                                                <br>
                                                <button type="submit" class="btn btn-light" style="font-family: 'Staatliches', cursive;">Update
                                                    Plan!</button>
                                                <br>
                                            </form>
                                            <br>
                                            <ul style="list-style-type: none; color:white; font-family: 'Staatliches', cursive;">
                                                {{#each plans}}
                                                <li>
                                                    <p>
                                                        {{this.id}}. {{this.plan}}
                                                        <button data-planid="{{this.id}}" class="delplan">Delete</button>
                                                    </p>
                                                </li>
                                                {{/each}}
                                            </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--  Map Widget  -->
        <div class="row">
            <div class="col-lg-6 map-div">
                <div class="widget">
                    <div class="panel panel-default text-center">
                        <div class="panel-heading5">
                            <h3>Geo Location</h3>
                        </div>
                        <div class="panel-body">

                            <font size="4"> Click the button to get your coordinates. </font>

                            <button onclick="getLocation()">Get Location</button>

                            <p id="demo"></p>


                        </div>
                    </div>
                </div>

            </div>


            <div class="col-md-6">
                <!--  Holiday Calendar Widget  -->
                <div class="widget">
                    <div class="panel panel-default text-center">

                        <div class="panel-body">

                            <iframe src="https://feed.mikle.com/widget/v2/99027/" height="402px" width="100%" class="fw-iframe"
                                scrolling="no" frameborder="0"></iframe>
                        </div>
                    </div>
                </div>
            </div>


        </div>

    </div>
    <!--END ON CONTAINER-->


    <script type="text/javascript">
        $(".delplan").on("click", function (event) {
            var id = $(this).data("planid");
            // Send the DELETE request.
            $.ajax("/todos/" + id, {
                type: "DELETE"
            }).then(
                function () {
                    console.log("deleted id ", id);
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
        $("#createplan").on("submit", function (event) {
            // Make sure to preventDefault on a submit event.
            event.preventDefault();
            // [name=plan] will find an element with a "name" attribute equal to the string "plan"
            var newPlan = {
                plan: $("#createplan [name=plan]").val().trim()
            };
            // Send the POST request.
            $.ajax("/todos", {
                type: "POST",
                data: newPlan
            }).then(
                function () {
                    console.log("created new plan");
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
        $("#updateplan").on("submit", function (event) {
            // Make sure to preventDefault on a submit event.
            event.preventDefault();
            // Get the ID by finding an element with a "name" attribute equal to the string "id"
            var id = $("[name=id]").val().trim();
            var updatedPlan = {
                plan: $("#updateplan [name=plan]").val().trim()
            };
            // Send the PUT request.
            $.ajax("/todos/" + id, {
                type: "PUT",
                data: updatedPlan
            }).then(
                function () {
                    console.log("updated id ", id);
                    // Reload the page to get the updated list
                    location.reload();
                }
            );
        });
    </script>

</body>
<script>
    var x = document.getElementById("demo");

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
    }

    function showPosition(position) {
        x.innerHTML = "Latitude: " + position.coords.latitude +
            "<br>Longitude: " + position.coords.longitude;
    }
</script>

</html>